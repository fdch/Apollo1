#N canvas 9 29 1271 749 12;
#X obj 127 235 inlet;
#X obj 370 96 inlet;
#X text 123 210 trigger;
#X obj 127 263 sel 0;
#X obj 188 388 f \$1;
#X obj 188 413 pack 0 \$2;
#X obj 420 400 del \$2;
#X obj 639 568 line~;
#X obj 444 428 f \$4;
#X obj 483 503 pack 0 \$3;
#X msg 127 294 stop;
#X obj 640 427 pack 0 \$5;
#X text 436 253 level;
#X obj 483 479 * \$1;
#X obj 639 598 outlet~;
#X text 55 250 if zero;
#X text 55 267 release;
#X text 34 284 and cancel;
#X text 69 301 decay;
#X text 711 419 on release ramp;
#X text 712 436 back to zero;
#X text 80 679 Objects such as "f" and "pack" can be given dollar sign
arguments to initialize their contents from adsr's creation arguments.
Inlets are supplied to change them on the fly.;
#X text 120 150 ADSR ENVELOPE;
#X text 489 253 attack;
#X text 544 253 decay;
#X text 591 253 sustain;
#X text 651 253 release;
#X text 227 195 attack;
#X obj 229 216 moses;
#X obj 216 246 t b b;
#X msg 150 414 0;
#X text 56 381 ATTACK:;
#X text 80 589 When you send this patch a positive trigger it schedules
a line~ to do an attack and decay \, and if zero \, it starts the release
ramp.;
#X text 594 679 Updated for Pd version 0.37;
#X text 277 213 test for negative trigger;
#X text 275 237 if so \, zero;
#X text 276 252 the output;
#X text 323 289 in any case;
#X text 440 237 peak;
#X text 301 273 ... do this;
#X text 80 641 Negative triggers cause the output to jump to zero and
then attack (instead of attacking from the current location).;
#X text 72 43 Arguments: level \, attack time \, decay time \, sustain
level \, release time. A \, D \, and R are in msec and S is in percent.
This patch is used as an abstraction in various examples.;
#X text 307 489 multiply by peak level and pack with decay time, f
24;
#X text 290 396 on attack \, set a delay for sustain, f 17;
#X text 55 403 optionally bash to zero, f 12;
#X text 19 441 then recall peak level and pack with attack time and
send to line~, f 22;
#X text 385 535 send to line~;
#X text 689 468 send to line~;
#X text 693 524 get attack/decay/release lines, f 23;
#X text 688 568 generate envelope;
#X obj 638 94 * 0.00787402;
#X obj 886 595 outlet;
#X obj 990 452 r eg\$6-decay;
#X obj 1112 455 r eg\$6-sustain;
#X obj 638 -17 r eg\$6-attackVelocityMod;
#X floatatom 661 300 5 0 0 0 - - -;
#X obj 990 479 * 7.87402;
#X obj 188 443 s \$0-line;
#X obj 483 534 s \$0-line;
#X obj 640 468 s \$0-line;
#X obj 639 500 r \$0-line;
#X obj 535 59 f;
#X obj 623 116 * 1;
#X obj 426 333 t f f;
#X obj 623 142 *;
#X obj 770 21 r eg\$6-attack;
#X obj 771 247 s \$0-attack;
#X obj 426 302 r \$0-attack;
#X obj 640 405 t b b;
#X obj 265 322 t b b b;
#X obj 654 275 r \$0-release;
#X obj 1112 483 * 0.00787402;
#X text 295 434 recall sustain value;
#X floatatom 306 118 5 0 0 0 - - -;
#X obj 1007 219 r \$0-attack;
#X obj 1007 243 s eg\$6-attack-display-set;
#X obj 1011 288 r \$0-release;
#X obj 1011 312 s eg\$6-release-display-set;
#X obj 1007 376 s eg\$6-decay-display-set;
#X obj 370 120 s \$0-level;
#X obj 214 363 r \$0-level;
#X obj 499 447 r \$0-level;
#X obj 553 -104 r \$0-level;
#X obj 989 506 s \$0-decay;
#X obj 543 475 r \$0-decay;
#X obj 1009 348 r \$0-decay;
#X obj 1112 509 s \$0-sustain;
#X obj 469 401 r \$0-sustain;
#X obj 707 17 ==;
#X obj 707 41 change;
#X obj 707 65 t f f;
#X obj 739 162 t f f;
#X obj 771 192 f;
#X obj 771 216 spigot 1;
#X obj 810 166 t f f;
#X obj 810 190 sel 1;
#X obj 623 166 spigot;
#X obj 673 167 ==;
#X obj 638 21 t f f;
#X obj 991 4 * 0.00787402;
#X obj 916 -37 f;
#X obj 976 26 * 1;
#X obj 976 52 *;
#X obj 1060 -73 ==;
#X obj 1060 -49 change;
#X obj 1060 -25 t f f;
#X obj 1096 94 t f f;
#X obj 1128 124 f;
#X obj 1128 148 spigot 1;
#X obj 1167 98 t f f;
#X obj 1167 122 sel 1;
#X obj 976 76 spigot;
#X obj 1026 77 ==;
#X obj 991 -69 t f f;
#X obj 991 -107 r eg\$6-releaseVelocityMod;
#X obj 1122 -76 r eg\$6-release;
#X obj 1128 179 s \$0-release;
#X obj 618 -70 t f f;
#X obj 553 -63 sel;
#X floatatom 916 -12 5 0 0 0 - - -;
#X obj 842 422 r eg\$6-switch;
#X obj 842 446 t f f;
#X msg 874 508 1;
#X obj 639 531 spigot 1;
#X obj 874 477 sel 1;
#X floatatom 482 341 5 0 0 0 - - -;
#X floatatom 556 501 5 0 0 0 - - -;
#X floatatom 481 423 5 0 0 0 - - -;
#X obj 1142 8 tabread4 dbtorms;
#X obj 1142 29 * 10000;
#X msg 1009 537 2051;
#X floatatom 1009 585 5 0 0 0 - - -;
#X obj 1009 561 / 127;
#X obj 1141 -37 * 16.14;
#X obj 1141 -14 + 256;
#X obj 1142 53 clip 1 10000;
#X obj 768 91 tabread4 dbtorms;
#X obj 767 46 * 16.14;
#X obj 767 69 + 256;
#X obj 768 112 * 1000;
#X obj 768 135 clip 1 1000;
#X connect 0 0 3 0;
#X connect 1 0 73 0;
#X connect 1 0 79 0;
#X connect 3 0 10 0;
#X connect 3 0 68 0;
#X connect 3 1 28 0;
#X connect 4 0 5 0;
#X connect 5 0 57 0;
#X connect 6 0 8 0;
#X connect 7 0 14 0;
#X connect 8 0 13 0;
#X connect 9 0 58 0;
#X connect 10 0 6 0;
#X connect 11 0 59 0;
#X connect 13 0 9 0;
#X connect 28 0 29 0;
#X connect 28 1 69 0;
#X connect 29 0 69 0;
#X connect 29 1 30 0;
#X connect 30 0 57 0;
#X connect 50 0 62 1;
#X connect 52 0 56 0;
#X connect 53 0 71 0;
#X connect 54 0 98 0;
#X connect 56 0 83 0;
#X connect 60 0 123 0;
#X connect 61 0 62 0;
#X connect 62 0 64 0;
#X connect 63 0 6 1;
#X connect 63 1 5 1;
#X connect 63 1 125 0;
#X connect 64 0 96 0;
#X connect 65 0 137 0;
#X connect 67 0 63 0;
#X connect 68 0 11 0;
#X connect 68 1 100 0;
#X connect 69 0 6 0;
#X connect 69 1 4 0;
#X connect 69 2 61 0;
#X connect 70 0 11 1;
#X connect 70 0 55 0;
#X connect 71 0 86 0;
#X connect 74 0 75 0;
#X connect 76 0 77 0;
#X connect 80 0 4 1;
#X connect 81 0 13 1;
#X connect 82 0 118 0;
#X connect 84 0 9 1;
#X connect 84 0 126 0;
#X connect 85 0 78 0;
#X connect 87 0 8 1;
#X connect 87 0 127 0;
#X connect 88 0 89 0;
#X connect 89 0 90 0;
#X connect 90 0 97 0;
#X connect 90 1 94 0;
#X connect 91 0 64 1;
#X connect 91 1 92 0;
#X connect 92 0 93 0;
#X connect 93 0 66 0;
#X connect 94 0 95 0;
#X connect 94 1 93 1;
#X connect 95 0 92 0;
#X connect 96 0 66 0;
#X connect 97 0 96 1;
#X connect 98 0 50 0;
#X connect 98 1 88 0;
#X connect 99 0 101 1;
#X connect 100 0 101 0;
#X connect 100 0 119 0;
#X connect 101 0 102 0;
#X connect 102 0 111 0;
#X connect 103 0 104 0;
#X connect 104 0 105 0;
#X connect 105 0 112 0;
#X connect 105 1 109 0;
#X connect 106 0 102 1;
#X connect 106 1 107 0;
#X connect 107 0 108 0;
#X connect 108 0 116 0;
#X connect 109 0 110 0;
#X connect 109 1 108 1;
#X connect 110 0 107 0;
#X connect 111 0 116 0;
#X connect 112 0 111 1;
#X connect 113 0 99 0;
#X connect 113 1 103 0;
#X connect 114 0 113 0;
#X connect 115 0 133 0;
#X connect 117 0 61 1;
#X connect 117 1 100 1;
#X connect 118 1 117 0;
#X connect 120 0 121 0;
#X connect 121 0 123 1;
#X connect 121 1 124 0;
#X connect 122 0 7 0;
#X connect 123 0 7 0;
#X connect 123 0 51 0;
#X connect 124 0 122 0;
#X connect 128 0 129 0;
#X connect 129 0 135 0;
#X connect 130 0 132 0;
#X connect 132 0 131 0;
#X connect 133 0 134 0;
#X connect 134 0 128 0;
#X connect 135 0 106 0;
#X connect 136 0 139 0;
#X connect 137 0 138 0;
#X connect 138 0 136 0;
#X connect 139 0 140 0;
#X connect 140 0 91 0;
